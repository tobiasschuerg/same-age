<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SameAge — Immich</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<nav class="navbar p-3 d-flex justify-content-between align-items-center">
    <span class="navbar-brand mb-0 h1">SameAge — Immich</span>
</nav>

<div class="container-fluid">
    <div class="row sticky-top header-row">
        <div class="col-1">
            <h2>Age</h2>
        </div>
        {% for person in persons %}
        <div class="col text-center text-capitalize">
            <h2>{{ person.name }}</h2>
        </div>
        {% endfor %}
    </div>

    {% for weeks, group in data.items() %}
    <div class="row photo-row">
        <div class="col-1 age-label-col">
            <div class="age-label sticky-top">{{ group.age_string }}</div>
        </div>
        {% for column in group.columns %}
        {% set col_index = loop.index0 %}
        <div class="col image-gallery">
            {% for image in column %}
            <div class="thumbnail-container"
                 onclick="toggleSelect(this)"
                 data-column="{{ col_index }}">
                <img class="lazy-load"
                     data-src="/thumbnail/{{ image.id }}" alt="{{ image.person_name }}"
                     onmouseover="showImage(this,
                                    '/thumbnail/{{ image.id }}',
                                    '{{ image.person_name }}: {{ image.capture_date }}')"
                     onmouseout="hideImage(this)">
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
    {% endfor %}

</div>

<button id="enlarge-btn" class="enlarge-btn" onclick="openFullscreen()">
    Enlarge (<span id="enlarge-count">0</span>)
</button>

<div id="fullscreen-overlay" class="fullscreen-overlay" onclick="closeFullscreen(event)">
    <div class="fullscreen-content" id="fullscreen-content"></div>
</div>

<script src="{{ url_for('static', filename='timeline.js') }}"></script>
</body>
</html>
